(()=>{(()=>{"use strict";var Q={};const d=e=>{const t=document.querySelector(e);if(!t)throw new Error(`Error: element with selector ${e} was not found`);return t},o=(e,t=[],s,r)=>{const n=document.createElement(e);return n.classList.add(...t),s&&Object.entries(s).forEach(([c,i])=>{n.setAttribute(c,i)}),r&&(n.innerHTML=r),n};var h=(e=>(e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.DELETE="DELETE",e))(h||{}),p=(e=>(e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.SERVER_ERROR=500]="SERVER_ERROR",e))(p||{}),E=(e=>(e.ar="ar",e.de="de",e.en="en",e.es="es",e.fr="fr",e.he="he",e.it="it",e.nl="nl",e.no="no",e.pt="pt",e.ru="ru",e.sv="sv",e.ud="ud",e.zh="zh",e))(E||{}),v=(e=>(e.business="business",e.entertainment="entertainment",e.general="general",e.health="health",e.science="science",e.sports="sports",e.technology="technology",e))(v||{}),T=(e=>(e.ae="ae",e.ar="ar",e.at="at",e.au="au",e.be="be",e.bg="bg",e.br="br",e.ca="ca",e.ch="ch",e.cn="cn",e.co="co",e.cu="cu",e.cz="cz",e.de="de",e.eg="eg",e.fr="fr",e.gb="gb",e.gr="gr",e.hk="hk",e.hu="hu",e.id="id",e.ie="ie",e.il="il",e.in="in",e.it="it",e.jp="jp",e.kr="kr",e.lt="lt",e.lv="lv",e.ma="ma",e.mx="mx",e.my="my",e.ng="ng",e.nl="nl",e.no="no",e.nz="nz",e.ph="ph",e.pl="pl",e.pt="pt",e.ro="ro",e.rs="rs",e.ru="ru",e.sa="sa",e.se="se",e.sg="sg",e.si="si",e.sk="sk",e.th="th",e.tr="tr",e.tw="tw",e.ua="ua",e.us="us",e.ve="ve",e.za="za",e))(T||{}),N=Object.defineProperty,w=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,l=(e,t,s)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_=(e,t)=>{for(var s in t||(t={}))O.call(t,s)&&l(e,s,t[s]);if(w)for(var s of w(t))I.call(t,s)&&l(e,s,t[s]);return e},m=(e,t,s)=>(l(e,typeof t!="symbol"?t+"":t,s),s);class P{constructor(t,s){m(this,"baseLink"),m(this,"options"),this.baseLink=t,this.options=s}getResp({endpoint:t,options:s={}},r=()=>{console.error("No callback for GET response")}){this.load(h.GET,t,r,s)}errorHandler(t){if(!t.ok){const s=t.status;throw(s===p.UNAUTHORIZED||s===p.NOT_FOUND)&&console.log(`Sorry, but there is ${t.status} error: ${t.statusText}`),Error(t.statusText)}return t}makeUrl(t,s){const r=_(_({},this.options),t);let n=`${this.baseLink}${s}?`;return Object.keys(r).forEach(c=>{n+=`${c}=${r[c]}&`}),n.slice(0,-1)}load(t,s,r,n={}){fetch(this.makeUrl(n,s),{method:t}).then(this.errorHandler.bind(this)).then(c=>c.json()).then(c=>r(c)).catch(c=>console.error(c))}}const A=P;class S extends A{constructor(){super("https://rss-news-api.onrender.com/",{apiKey:"b60edbb01bd5439f956cf174bfd38b0b"})}}const D=S;class x extends D{getSources(t){super.getResp({endpoint:"sources"},t)}getNews(t,s){let{target:r}=t;const n=t.currentTarget;if(!(!r||!n))for(;r!==n&&r instanceof HTMLElement;){if(r.classList.contains("source__item")){const c=r.getAttribute("data-source-id");n instanceof HTMLElement&&n.getAttribute("data-source")!==c&&c&&(n.setAttribute("data-source",c),super.getResp({endpoint:"everything",options:{sources:c}},s));return}r=r.parentNode?r.parentNode:r}}}const M=x,U="../../../assets/image-placeholder.jpeg",f=10,H=2;class V{draw(t){const s=t.splice(0,f),r=document.querySelector(".news");r&&(r.innerHTML=""),s.forEach((n,c)=>{const i=o("div",["news__item"]);c%H&&i.classList.add("alt");const a=this._createNewsItemMeta(n),W=this._createNewsItemDescription(n);i.append(a,W),r&&r.append(i)})}_createNewsItemMeta(t){const s=o("div",["news__meta"]),r=o("div",["news__meta-photo"]);r.style.backgroundImage=`url(${(t==null?void 0:t.urlToImage)||U})`;const n=o("ul",["news__meta-details"]),c=o("li",["news__meta-author"]);c.textContent=t.author||t.source.name;const i=o("li",["news__meta-date"]);return i.textContent=t.publishedAt.slice(0,f).split("-").reverse().join("-"),n.append(c,i),s.append(r,n),s}_createNewsItemDescription(t){const s=o("div",["news__description"]),r=o("h2",["news__description-title"]);r.textContent=t.title;const n=o("h3",["news__description-source"]);n.textContent=t.source.name;const c=o("p",["news__description-content"]);c.textContent=t.description;const i=o("p",["news__read-more"]),a=o("a",[],{href:t.url});return a.textContent="Read more",i.append(a),s.append(r,n,c,i),s}}const R=V;class z{draw(t){t.forEach(s=>this._createSourceItem(s))}_createSourceItem(t){try{const s=d(".sources"),r=o("div",["source__item"],{"data-source-id":t.id}),n=o("span",["source__item-name"]);n.textContent=t.name,r.append(n),s.append(r)}catch(s){console.error(s)}}}const F=z;var $=Object.defineProperty,g=(e,t,s)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,u=(e,t,s)=>(g(e,typeof t!="symbol"?t+"":t,s),s);class j{constructor(){u(this,"news"),u(this,"sources"),this.news=new R,this.sources=new F}drawNews(t){const s=t.articles?t.articles:[];this.news.draw(s)}drawSources(t){const s=t.sources?t.sources:[];this.sources.draw(s)}}const Z=null;var L=Object.defineProperty,k=(e,t,s)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,b=(e,t,s)=>(k(e,typeof t!="symbol"?t+"":t,s),s);class B{constructor(){b(this,"controller"),b(this,"view"),this.controller=new M,this.view=new j}start(){try{d(".sources").addEventListener("click",s=>{this.controller.getNews(s,r=>this.view.drawNews(r))})}catch(t){console.error(t)}this.controller.getSources(t=>{this.view.drawSources(t)})}}const G=B;new G().start()})();})();
